generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model TypeUser {
  id   Int    @id @default(autoincrement())
  type String @db.VarChar(15)
  user User[]
  verification_code Verification_Code[]

  @@map("type_user")
}

model User {
  id                Int                 @id @default(autoincrement())
  email             String              @unique @db.VarChar(50)
  name              String              @db.VarChar(50)
  password          String              @db.VarChar(18)
  is_verified       Boolean             @default(false)
  type_user_id      Int
  updated_at        DateTime            @updatedAt
  created_at        DateTime            @default(now())
  type_user         TypeUser            @relation(fields: [type_user_id], references: [id])
  verification_code Verification_Code[]
  student           Student?
  teacher           Teacher?

  @@map("user")
}

model Student {
  user_id       Int     @id @unique
  user          User    @relation(fields: [user_id], references: [id])
  description   String  @db.VarChar(500)
  enrollment    String  @unique @db.VarChar(10)
  course        Course  @relation(fields: [course_id], references: [id])
  course_id     Int
  contact_email String  @db.VarChar(50)
  whatsapp      String? @db.VarChar(11)
  linkedin      String? @db.VarChar(100)

  @@map("student")
}

model Teacher {
  user_id Int  @id
  user    User @relation(fields: [user_id], references: [id])

  @@map("teacher")
}

model Subject {
  id        Int    @id @default(autoincrement())
  name      String @db.VarChar(100)
  code      String @db.VarChar(10)
  course_id Int
  course    Course @relation(fields: [course_id], references: [id])

  @@map("subject")
}

model Course {
  id      Int       @id @default(autoincrement())
  name    String    @db.VarChar(100)
  code    String    @unique @db.VarChar(10)
  student Student[]
  subject Subject[]

  @@map("course")
}

model Verification_Code {
  id          Int      @id @default(autoincrement())
  code        String   @unique @db.VarChar(6)
  type        TypeUser @relation(fields: [type_id], references: [id])
  type_id     Int
  is_verified Boolean  @default(false)
  user        User     @relation(fields: [user_id], references: [id])
  user_id     Int
  updated_at  DateTime @updatedAt
  created_at  DateTime @default(now())

  @@map("verification_code")
}
